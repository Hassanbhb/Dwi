const signup_display_btn=document.querySelector(".signup-btn"),signUp_form=document.querySelector(".signup-form"),login_display_btn=document.querySelector(".login-btn"),login_form=document.querySelector(".login-form"),message=document.querySelector(".message"),message_title=document.querySelector(".message-title"),message_body=document.querySelector(".message-body"),msg_close_btn=document.querySelector(".close");function emailValidation(e){return/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)}function passwordValidation(e){return/(?=[#$-/:-?{-~!"^_`\[\]a-zA-Z]*([0-9#$-/:-?{-~!"^_`\[\]]))(?=[#$-/:-?{-~!"^_`\[\]a-zA-Z0-9]*[a-zA-Z])[#$-/:-?{-~!"^_`\[\]a-zA-Z0-9]{4,}/.test(e)}function comparePasswords(e,s){return e===s}function usernameValidation(e){return/[a-zA-Z][a-zA-Z0-9-_]{3,20}/.test(e)}function messageDisplay(e,s,a){e?(message.classList.add("message-error"),message.classList.remove("hide-message"),setTimeout((function(){message.classList.add("hide-message")}),5e3),message_title.innerHTML=s.error.title,message_body.innerHTML=s.error.body):a?location.href="/dashboard":(message.classList.add("message-success"),message.classList.remove("hide-message"),setTimeout((()=>{message.classList.add("hide-message")}),5e3),message_title.innerHTML=s.success.title,message_body.innerHTML=s.success.body)}function ajaxFunction(e,s,a,t){const i=new XMLHttpRequest;i.open(e,s,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=()=>{if(4==i.readyState&&200===i.status){const e=JSON.parse(i.response);messageDisplay(e.hasOwnProperty("error"),e,t)}},i.send(a)}signup_display_btn.addEventListener("click",(e=>{e.target.classList.add("active"),login_display_btn.classList.remove("active"),signUp_form.classList.remove("hide"),login_form.classList.add("hide")})),login_display_btn.addEventListener("click",(e=>{e.target.classList.add("active"),signup_display_btn.classList.remove("active"),signUp_form.classList.add("hide"),login_form.classList.remove("hide")})),msg_close_btn.addEventListener("click",(e=>{message.classList.add("hide-message")})),login_form.addEventListener("submit",(e=>{e.preventDefault();const s=document.querySelector(".login_email").value,a=document.querySelector(".login_password").value;if(emailValidation(s)&&passwordValidation(a)){ajaxFunction("POST",window.location.href+"/login",`email=${s}&password=${a}`,!0)}else passwordValidation(a)||messageDisplay(!0,{error:{title:"Password Must have:",body:"4+ characters | 1+ digit or special char!"}})})),signUp_form.addEventListener("submit",(e=>{e.preventDefault();const s=document.querySelector(".signup_username").value,a=document.querySelector(".signup_email").value,t=document.querySelector(".signup_password").value,i=document.querySelector(".signup_confirm_pswd").value;if(emailValidation(a)&&passwordValidation(t)&&comparePasswords(t,i)&&usernameValidation(s)){ajaxFunction("POST",window.location.href+"/register",`username=${s}&email=${a}&password=${t}&confirmPassword=${i}`)}else passwordValidation(t)?comparePasswords(t,i)?usernameValidation(s)||messageDisplay(!0,{error:{title:"Username Must have:",body:"Must be 4 to 21 chars | first char is alpahbetic | can have - and _"}}):messageDisplay(!0,{error:{title:"Passwords do not match!",body:"Please confirm your password."}}):messageDisplay(!0,{error:{title:"Password Must have:",body:"4+ characters | 1+ digit or special char!"}})}));