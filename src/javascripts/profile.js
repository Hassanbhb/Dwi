const main_header=document.querySelector(".main-header"),nav_btn=document.querySelector(".nav-toggle");window.onclick=e=>{e.target.matches(".main-header")||e.target.matches(".nav-toggle")||main_header.classList.remove("active")},nav_btn.addEventListener("click",(e=>{main_header.classList.toggle("active")}));const myposts_btn=document.querySelector(".myPostsBtn"),update_btn=document.querySelector(".updateBtn"),mypostsDiv=document.querySelector(".myposts"),profile_form=document.querySelector(".profile-form");myposts_btn.addEventListener("click",(e=>{profile_form.classList.add("hide"),mypostsDiv.classList.remove("hide")})),update_btn.addEventListener("click",(e=>{profile_form.classList.remove("hide"),mypostsDiv.classList.add("hide")}));const message=document.querySelector(".message"),message_title=document.querySelector(".message-title"),message_body=document.querySelector(".message-body"),msg_close_btn=document.querySelector(".close");function messageDisplay(e,t,s){e?(message.classList.add("message-error"),message.classList.remove("hide-message"),setTimeout((function(){message.classList.add("hide-message")}),5e3),message_title.innerHTML=t.error.title,message_body.innerHTML=t.error.body):s?location.href="/dashboard":(message.classList.add("message-success"),message.classList.remove("hide-message"),setTimeout((()=>{message.classList.add("hide-message"),message.classList.remove("message-success")}),5e3),message_title.innerHTML=t.success.title,message_body.innerHTML=t.success.body)}msg_close_btn.addEventListener("click",(e=>{message.classList.add("hide-message")}));const updateForm=document.querySelector(".profile-form");updateForm.addEventListener("submit",(e=>{e.preventDefault();const t=window.location,s=`username=${document.querySelector("input[name='username']").value}&email=${document.querySelector("input[name='email']").value}&newPassword=${document.querySelector("input[name='newPassword']").value}&confirmPassword=${document.querySelector("input[name='confirmPassword']").value}`,a=new XMLHttpRequest;a.open("PUT",t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4==a.readyState&&200===a.status){const e=JSON.parse(a.response);console.log(e);messageDisplay(e.hasOwnProperty("error"),e,!1)}},a.send(s)}));const showBtns=document.querySelectorAll(".actions > div > img");showBtns.forEach((e=>{e.addEventListener("click",(e=>{e.target.parentElement.parentElement.parentElement.nextSibling.classList.toggle("hide")}))}));const delete_btns=document.querySelectorAll(".delete-post");delete_btns.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=window.location.origin+"/dashboard/delete/post",s=e.target.parentNode.getAttribute("data-postId");const a=new XMLHttpRequest;a.open("DELETE",t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==a.readyState&&200===a.status&&(location.href="/profile")},a.send(`postId=${s}`)}))}));