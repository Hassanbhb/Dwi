extends layouts/layout.pug
block content
  include partials/navbar.pug
  main
    .postForm
      form(action="new/post", method="post")
        label Create Post
        input(type="text" name="newPost" placeholder="What's on your mind" required)
        button(type="submit") Post
    .posts
      //- reverse posts to display newest at the top
      each post in posts.reverse()
        .card
          .postOwner
            h3= `${post.author.name} ${post.author.lastName}`
            p= post.createdAt
          .postText
            p= post.body
          .heart
            p ‚ù§ #{post.likes}
          .reaction
            button like
          .comments
            //- reverse comment array to display newest at the top
            each comment in post.comments.reverse()
              .comment
                h5=`${comment.author.name} ${comment.author.lastName}`
                p=comment.createdAt
                p=comment.text
          form(action="new/comment?_method=PUT", method="post")
            input(type="hidden", name="postId" value=post._id)
            input(type="text" name="comment" placeholder="Write a comment...")    
            button(type="submit") Send